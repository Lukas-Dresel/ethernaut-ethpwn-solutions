from ethpwn import *
import sys

# assemble a minimal ethereum contract which returns 42
# this is the contract we will deploy

bytecode = asm_mstore(0, 42)
bytecode += asm_return(0, 32)


magicnum = register_contract('MagicNum', sys.argv[1], source_files=['magicnum.sol'])
# debug_shellcode(bytecode)

# deploy the contract
tx_hash, tx_receipt, shellcode_contract = deploy_shellcode_contract(bytecode)

# set the solver
transact(magicnum.functions.setSolver(shellcode_contract.address))


