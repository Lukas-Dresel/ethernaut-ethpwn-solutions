#!/bin/bash


#rename all exploit files in the current directory from exploit_<chall>.sol to <chall>_exploit.sol

# for f in exploit_*.sol; do
#     # remove the exploit_ prefix
#     STRIP1=${f#exploit_}
#     # remove the .sol suffix
#     CHALL_NAME=${STRIP1%.sol}
#     echo $CHALL_NAME
#     mv "$f" "${CHALL_NAME}_exploit.sol"
# done

for f in ./*_exploit.sol; do
    BASENAME=$(basename "$f")
    # remove the _exploit.sol suffix
    STRIP1=${BASENAME%_exploit.sol}
    CHALL_NAME=${STRIP1%_exploit.sol}
    echo $CHALL_NAME
    echo mkdir -p "./${CHALL_NAME}/"
    echo mv "$f" "./${CHALL_NAME}/exploit.sol"
    echo mv "./${CHALL_NAME}_exploit*.py" "./${CHALL_NAME}/exploit.py"
done